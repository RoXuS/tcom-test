import{b as e,s as t,L as i,a as s,h as a,d as p,e as r,f as o,p as c,c as n}from"./d64817af.js";import{g as d,a as h}from"./474b5079.js";let l,v,m,g=e=>e;var f=function(e,t,i,s){var a,p=arguments.length,r=p<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(p<3?a(r):p>3?a(t,i,r):a(t,i))||r);return p>3&&r&&Object.defineProperty(t,i,r),r};let u=class extends(e(t)(i)){constructor(){super(...arguments),this.tops=[],this.page=0,this.size=0,this.currentLive=[]}static get styles(){return[s(l||(l=g`:host{display:block;background-color:#f6f6ef;padding:10px 9px 0 9px}.live-items>tcom-live-item{margin-bottom:5px}.more{color:#828282;margin-top:10px;padding-left:25px;font-size:10pt;cursor:pointer}`))]}render(){return a(v||(v=g`<div class="live-items"> ${0} </div> <div class="more" @click="${0}">More</div> `),this.currentLive.map(((e,t)=>a(m||(m=g`<tcom-live-item .index="${0}" .item="${0}"></tcom-live-item>`),t+1+this.page*this.size,e))),this.tapOnMore.bind(this))}updated(e){(e.has("size")||e.has("page")||e.has("size")||e.has("tops"))&&this.getMappedLive()}async firstUpdated(){const e=await d("top");t.dispatch(p(e))}stateChanged(e){this.tops=e.live.tops,this.size=e.live.size,this.page=e.live.page,this.currentLive=e.live.currentLive}async getMappedLive(){const e=this.tops.slice(this.page*this.size,this.page*this.size+this.size),i=await Promise.all(e.map((e=>h(e))));t.dispatch(r(i))}tapOnMore(){t.dispatch(o(this.page+1))}};f([c({type:Array})],u.prototype,"tops",void 0),f([c({type:Number})],u.prototype,"page",void 0),f([c({type:Number})],u.prototype,"size",void 0),f([c({type:Array})],u.prototype,"currentLive",void 0),u=f([n("tcom-top")],u);var y=u;export default y;
